<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="FANYANGEN"><meta name="baidu-site-verification" content="DPXolwGiJK"><meta name="google-site-verification" content="lHMA_egVLZmSBHSynj6ljwAsENjGmKa7Pz-RnvYeiIA"><title>SpringBoot JavaMail-邮件服务 · Ronaldo</title><meta name="description" content="JavaMail，顾名思义，提供给开发者处理电子邮件相关的编程接口。它是Sun发布的用来处理email的API。它可以方便地执行一些常用的邮件传输。 — 百度百科
一、构建项目
https://github.com/Javen205

1、pom.xml配置 引入主角javamail1234&amp;lt;"><meta name="keywords" content="Java,HTML,CSS,Javascript,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Ronaldo</a></h3><div class="description"><p>爱你所爱 行你所行</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/headpic.jpg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>SpringBoot JavaMail-邮件服务</a></h3></div><div class="post-content"><p>JavaMail，顾名思义，提供给开发者处理<code>电子邮件</code>相关的编程接口。它是<code>Sun发布的用来处理email</code>的API。它可以方便地执行一些常用的邮件传输。 — 百度百科</p>
<h3 id="一、构建项目"><a href="#一、构建项目" class="headerlink" title="一、构建项目"></a>一、构建项目</h3><blockquote>
<p><a href="https://github.com/Javen205" target="_blank" rel="noopener">https://github.com/Javen205</a></p>
</blockquote>
<p>1、pom.xml配置 引入主角javamail<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>2、开启QQ邮箱<code>POP3/SMTP服务</code></p>
<ul>
<li>进入QQ邮箱主页，点击设置<br><img src="https://i.loli.net/2019/01/14/5c3be0422bd3c.png" alt="7BD1B0FC-13ED-4996-8A86-8903117E3C76.png"></li>
<li>在设置里面切换至账户 往下滑找到（ POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务 ），点击<code>开启POP3/SMTP服务</code><br><img src="https://i.loli.net/2019/01/14/5c3be0df45213.png" alt="8032CFEB-D805-4CA1-A306-EB355889D70F.png"></li>
</ul>
<p>3、application.yml 关于邮箱的配置【 本例采用QQ邮箱，如需换其他邮箱更改application.yml中的具体配置即可 】<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  mail:</span><br><span class="line">    host: smtp<span class="selector-class">.qq</span><span class="selector-class">.com</span> #发送邮件服务器</span><br><span class="line">    username: xxx@qq<span class="selector-class">.com</span> #QQ邮箱</span><br><span class="line">    password: xxx #客户端授权码</span><br><span class="line">    protocol: smtp #发送邮件协议</span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.smtp</span><span class="selector-class">.auth</span>: true</span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.smtp</span><span class="selector-class">.port</span>: <span class="number">465</span> #端口号<span class="number">465</span>或<span class="number">587</span></span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.display</span><span class="selector-class">.sendmail</span>: RONALDO #可以任意</span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.display</span><span class="selector-class">.sendname</span>: Hello Email #可以任意</span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.smtp</span><span class="selector-class">.starttls</span><span class="selector-class">.enable</span>: true</span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.smtp</span><span class="selector-class">.starttls</span><span class="selector-class">.required</span>: true</span><br><span class="line">    properties<span class="selector-class">.mail</span><span class="selector-class">.smtp</span><span class="selector-class">.ssl</span><span class="selector-class">.enable</span>: true</span><br><span class="line">    default-encoding: utf-<span class="number">8</span></span><br><span class="line">    from: xxx@qq<span class="selector-class">.com</span> #与上面的username保持一致</span><br></pre></td></tr></table></figure></p>
<p>4、编写IMailService 邮件接口<br>我们一般只会用到 发送文本邮件、发送HTML邮件、发送带附件的邮件<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> interface IMailService &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送文本邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="literal">void</span> sendSimpleMail(<span class="built_in">String</span> <span class="keyword">to</span>, <span class="built_in">String</span> subject, <span class="built_in">String</span> content);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送HTML邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="literal">void</span> sendHtmlMail(<span class="built_in">String</span> <span class="keyword">to</span>, <span class="built_in">String</span> subject, <span class="built_in">String</span> content) throws MessagingException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送带附件的邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="literal">void</span> sendAttachmentsMail(<span class="built_in">String</span> <span class="keyword">to</span>, <span class="built_in">String</span> subject, <span class="built_in">String</span> content, <span class="built_in">String</span> filePath) throws MessagingException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>5、编写IMailServiceImpl 邮件接口实现<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"mailService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> IMailServiceImpl <span class="keyword">implements</span> IMailService &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender mailSender;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.mail.from&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> <span class="keyword">from</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> sendSimpleMail(<span class="built_in">String</span> to, <span class="built_in">String</span> subject, <span class="built_in">String</span> content) &#123;</span><br><span class="line">        SimpleMailMessage message = <span class="keyword">new</span> SimpleMailMessage();</span><br><span class="line">        message.setFrom(<span class="keyword">from</span>);</span><br><span class="line">        message.setTo(to);</span><br><span class="line">        message.setSubject(subject);</span><br><span class="line">        message.setText(content);</span><br><span class="line">        mailSender.send(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> sendHtmlMail(<span class="built_in">String</span> to, <span class="built_in">String</span> subject, <span class="built_in">String</span> content) throws MessagingException &#123;</span><br><span class="line">        MimeMessage message = mailSender.createMimeMessage();</span><br><span class="line">        MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(message, <span class="literal">true</span>);</span><br><span class="line">        helper.setFrom(<span class="keyword">from</span>);</span><br><span class="line">        helper.setTo(to);</span><br><span class="line">        helper.setSubject(subject);</span><br><span class="line">        helper.setText(content, <span class="literal">true</span>);</span><br><span class="line">        mailSender.send(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> sendAttachmentsMail(<span class="built_in">String</span> to, <span class="built_in">String</span> subject, <span class="built_in">String</span> content, <span class="built_in">String</span> filePath) throws MessagingException &#123;</span><br><span class="line">        MimeMessage message = mailSender.createMimeMessage();</span><br><span class="line">        MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(message, <span class="literal">true</span>);</span><br><span class="line">        helper.setFrom(<span class="keyword">from</span>);</span><br><span class="line">        helper.setTo(to);</span><br><span class="line">        helper.setSubject(subject);</span><br><span class="line">        helper.setText(content, <span class="literal">true</span>);</span><br><span class="line">        FileSystemResource file = <span class="keyword">new</span> FileSystemResource(<span class="keyword">new</span> File(filePath));</span><br><span class="line">        <span class="built_in">String</span> fileName = filePath.substring(filePath.lastIndexOf(File.separator));</span><br><span class="line">        helper.addAttachment(fileName, file);</span><br><span class="line">        mailSender.send(message);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>6、编写结果提示类【 该类并无实际用途，仅仅用作返回邮件是否发送成功的标识 】<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonResult</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> int code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> T <span class="keyword">data</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> JsonResult() &#123;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> JsonResult(int code, String msg) &#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>7、编写template邮件模板【 emailTemp.html 】 在接下来的控制器中会用到<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        邮件名: <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:text</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;project&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        发件人: <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:text</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;author&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        链接: <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"@</span></span></span><span class="template-variable">&#123;$&#123;url&#125;</span><span class="xml"><span class="tag"><span class="string">&#125;"</span>&gt;</span>GO<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>7、编写邮件发送控制器 EmailController<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(<span class="string">"email"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    <span class="keyword">private</span> IMailServiceImpl mailService;</span><br><span class="line">    @Autowired</span><br><span class="line">    <span class="keyword">private</span> TemplateEngine templateEngine;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 普通文本邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @RequestMapping</span><br><span class="line">    <span class="keyword">public</span> JsonResult index() &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mailService.sendSimpleMail(<span class="string">"1781884292@qq.com"</span>, <span class="string">"Hello Email"</span>, <span class="string">"这是一封普通的文本测试邮件"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>(<span class="number">-1</span>, <span class="string">"邮件发送失败!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HTML邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @RequestMapping(<span class="string">"/htmlEmail"</span>)</span><br><span class="line">    <span class="keyword">public</span> JsonResult htmlEmail() &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mailService.sendHtmlMail(<span class="string">"1781884292@qq.com"</span>, <span class="string">"这是一HTML的邮件"</span>, <span class="string">"&lt;body style=\"text-align: center;margin-left: auto;margin-right: auto;\"&gt;\n"</span></span><br><span class="line">                    + <span class="string">"	&lt;div id=\"welcome\" style=\"text-align: center;position: absolute;\" &gt;\n"</span></span><br><span class="line">                    + <span class="string">"		&lt;div\n"</span></span><br><span class="line">                    + <span class="string">"			style=\"text-align: center; padding: 10px\"&gt;&lt;a style=\"text-decoration: none;\" href=\"https://www.cronaldo7.cn\" target=\"_bank\" &gt;&lt;strong&gt;欢迎访问我的博客 :)&lt;/strong&gt;&lt;/a&gt;"</span></span><br><span class="line">                    + <span class="string">"     &lt;/div&gt;\n"</span></span><br><span class="line">                    + <span class="string">"	&lt;/div&gt;\n"</span> + <span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>(<span class="number">-1</span>, <span class="string">"邮件发送失败!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 附件邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @RequestMapping(<span class="string">"/attachmentsMail"</span>)</span><br><span class="line">    <span class="keyword">public</span> JsonResult attachmentsMail() &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">String</span> filePath = <span class="string">"/Users/fan/Desktop/0.jpg"</span>;</span><br><span class="line">            mailService.sendAttachmentsMail(<span class="string">"1781884292@qq.com"</span>, <span class="string">"这是一封带附件的邮件"</span>, <span class="string">"邮件中有附件，请注意查收！"</span>, filePath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>(<span class="number">-1</span>, <span class="string">"邮件发送失败!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * template模板邮件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @RequestMapping(<span class="string">"/templateMail"</span>)</span><br><span class="line">    <span class="keyword">public</span> JsonResult templateMail() &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Context context = <span class="keyword">new</span> <span class="type">Context</span>();</span><br><span class="line">            context.setVariable(<span class="string">"project"</span>, <span class="string">"Hello"</span>);</span><br><span class="line">            context.setVariable(<span class="string">"author"</span>, <span class="string">"ROANDLO"</span>);</span><br><span class="line">            context.setVariable(<span class="string">"url"</span>, <span class="string">"https://www.cronaldo7.cn/"</span>);</span><br><span class="line">            <span class="keyword">String</span> emailContent = templateEngine.process(<span class="string">"emailTemp"</span>, context);</span><br><span class="line">            mailService.sendHtmlMail(<span class="string">"1781884292@qq.com"</span>, <span class="string">"这是模板邮件"</span>, emailContent);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>(<span class="number">-1</span>, <span class="string">"邮件发送失败!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JsonResult</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>8、发送测试</p>
<ul>
<li>普通文本邮件 <a href="http://127.0.0.1:8080/email" target="_blank" rel="noopener">http://127.0.0.1:8080/email</a></li>
<li>HTML邮件 <a href="http://127.0.0.1:8080/email/htmlEmail" target="_blank" rel="noopener">http://127.0.0.1:8080/email/htmlEmail</a></li>
<li>带附件邮件 <a href="http://127.0.0.1:8080/email/attachmentsMail" target="_blank" rel="noopener">http://127.0.0.1:8080/email/attachmentsMail</a></li>
<li>template模板邮件 <a href="http://127.0.0.1:8080/email/templateMail" target="_blank" rel="noopener">http://127.0.0.1:8080/email/templateMail</a><br>发送成功<br><img src="https://i.loli.net/2019/01/14/5c3bea08977fd.png" alt="4D43B6AB-5CA4-4BB8-893B-4A149E19E952.png"></li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-01-14</span><i class="fa fa-tag"></i><a class="tag" href="/tags/原创/" title="原创">原创 </a><a class="tag" href="/tags/后端/" title="后端">后端 </a><a class="tag" href="/tags/SpringBoot/" title="SpringBoot">SpringBoot </a><a class="tag" href="/tags/java-mail/" title="java-mail">java-mail </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/posts/1744/,Ronaldo,SpringBoot JavaMail-邮件服务,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/posts/2000/" title="SpringBoot 文件上传下载">Previous Article</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/posts/7539/" title="SpringBoot配置 servlet、过滤器、监听器、拦截器">Next Article</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>